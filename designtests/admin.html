<head>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.1/css/bulma.min.css">
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"
    integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>

<meta name="viewport" content="width=device-width, initial-scale=1.0">

</head>

<body>
  <section class="hero is-light">
    <div class="hero-body">
      <div class="container">
        <section>
          <h1 class='title is-1'>Welcome, {{Admin.fname}}</h1>

        </section>

        <h1 class='title is-3'>Users List:</h1>
      </div>
      <div class="container">
        <div class="modal">
          <div class="modal-background"></div>
          <div class="modal-content">

            <!--modal container !-->
            <div class="card">
              <div class="card-content">
                <b>Update query for </b><label id='curUser'></label>
                <div class="field">
                  <button class="modal-close"></button>
                  <div class="control">
                    <input class="input" type="text" placeholder='eg. {role: "user"}' id=modaltext>

                  </div>
                </div>
                <div class="control">
                </div>
                <footer class="card-footer">
                  <a href="#" class="card-footer-item closeModal is-info button">Close Modal</a>
                  <a href="#" class="card-footer-item is-info button">Update Query</a>
                  <a href="#" class="card-footer-item button is-danger">Remove User</a>
              
                  
                </footer>
                
              </div>
              
            </div>
          </div>

        </div>
        <table class="table">
          <thead>
            <tr>
              <th>Email</th>
              <th><abbr title="First Name">FN</abbr></th>
              <th><abbr title="Last Name">LN</abbr></th>
              <th>Country</th>
              <th>State</th>
              <th><abbr title="Where From">wFrom</abbr></th>
              <th><abbr title="Experience">wExp</abbr></th>
              <th><abbr title="Affiliate ID">affid</abbr></th>
              <th><abbr title="role">Role</abbr></th>
              <th><abbr title="balance">Balance</abbr></th>
              <th><abbr title="Leads Completed">LC</abbr></th>
              <th><abbr title="Prefered Payment Mode">prefpayment</abbr></th>
              <th><abbr title="Created At">createdAt</abbr></th>
              <th>Edit User</th>
            
            </tr>
          </thead>
          <tfoot>
            <tr>
              <th>Email</th>
              <th><abbr title="First Name">FN</abbr></th>
              <th><abbr title="Last Name">LN</abbr></th>
              <th>Country</th>
              <th>State</th>
              <th><abbr title="Where From">wFrom</abbr></th>
              <th><abbr title="Experience">wExp</abbr></th>
              <th><abbr title="Affiliate ID">affid</abbr></th>
              <th><abbr title="role">Role</abbr></th>
              <th><abbr title="balance">Balance</abbr></th>
              <th><abbr title="Leads Completed">LC</abbr></th>
              <th><abbr title="Prefered Payment Mode">prefpayment</abbr></th>
              <th><abbr title="Created At">createdAt</abbr></th>
              <th>Edit User</th>
  
            </tr>
          </tfoot>
          {{#each User}}
          <tbody>
            <tr>
              <td>{{this.email}}</td>
              <td>{{this.fname}}</td>
              <td>{{this.lname}}</td>
              <td>{{this.country}}</td>
              <td>{{this.state}}</td>
              <td>{{this.wfrom}}</td>
              <td>{{this.wexp}}</td>
              <td>{{this.affid}}</td>
              <td>{{this.role}}</td>
              <td>{{this.balance}}</td>
              <td>{{this.leadsCompleted}}</td>
              <td>{{this.prefpayment}}</td>
              <td>{{this.createdAt}}</td>
              <td><button class="button is-info" id="showModal">Edit</button></td>
         
            </tr>
          </tbody>
          {{/each}}
          <nav class="pagination is-centered" role="navigation" aria-label="pagination">
            <a class="pagination-previous">Previous</a>
            <a class="pagination-next">Next page</a>
            <ul class="pagination-list">
              <li><a class="pagination-link is-current">1</a></li>
              <li><a class="pagination-link">2</a></li>
              <li><a class="pagination-link">3</a></li>
              <li><a class="pagination-link">4</a></li>
              <span class="pagination-ellipsis">&hellip;</span>
              <li><a class="pagination-link">5</a></li>
            </ul>
          </nav>
        </table>

        <i>Loop it</i>

      </div>

    </div>
  </section>



  </div>
</body>

<!--Send admin secret data (_id or custom hashed string) along with query string to post endpoint post must get (_id or custom hashed string) or respond with auth failure-->
<script>

  $("#showModal").click(function (e) {

    var editButton = $(e.target);
    var user = editButton.parents('td');
    $('#curUser').text($(this).parent().parent().find('td:nth-child(1)').text())

    $(".modal").addClass("is-active");
  });

  $(".modal-close").click(function () {
    $(".modal").removeClass("is-active");
  });
  $(".closeModal").click(function () {
    $(".modal").removeClass("is-active");
  });


</script>